import{d as e,c as s,a as t,t as a,F as o,r as n,w as c,o as i,p as r,b as l,e as d,f as u,g as h}from"./vendor.8fbc765b.js";!function(e=".",s="__import__"){try{self[s]=new Function("u","return import(u)")}catch(t){const a=new URL(e,location),o=e=>{URL.revokeObjectURL(e.src),e.remove()};self[s]=e=>new Promise(((t,n)=>{const c=new URL(e,a);if(self[s].moduleMap[c])return t(self[s].moduleMap[c]);const i=new Blob([`import * as m from '${c}';`,`${s}.moduleMap['${c}']=m;`],{type:"text/javascript"}),r=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(i),onerror(){n(new Error(`Failed to import: ${e}`)),o(r)},onload(){t(self[s].moduleMap[c]),o(r)}});document.head.appendChild(r)})),self[s].moduleMap={}}}("assets/");var m=e({name:"SiderBar",data:()=>({basicGraphics:{title:"基本图形",items:[{text:"线段",id:"line"},{text:"矩形",id:"rect"},{text:"椭圆",id:"oval"}]}}),computed:{selected(){return this.$store.state.selectedBasicGraphics}},methods:{onClick(e){this.$store.commit("setSelected",e.id)}}});const v=c("data-v-1bf47564")(((e,c,r,l,d,u)=>(i(),s("aside",null,[t("dl",null,[t("dt",null,a(e.basicGraphics.title),1),(i(!0),s(o,null,n(e.basicGraphics.items,(t=>(i(),s("dd",{key:t.text,class:{active:e.selected===t.id},onClick:s=>e.onClick(t)},a(t.text),11,["onClick"])))),128))])]))));m.render=v,m.__scopeId="data-v-1bf47564";let w=null;var p=e({name:"MainCanvas",data:()=>({mouseDown:[-1,-1],mouseMove:[-1,-1],canvasWid:void 0,canvasHei:void 0}),computed:{selected(){return this.$store.state.selectedBasicGraphics},canvasDom(){return this.$refs.canvas},canvasLayer(){return this.$refs.canvasLayer},mouseStatusDown(){return-1!==this.mouseDown[0]&&-1!==this.mouseDown[1]},ctx(){return this.canvasDom.getContext("2d")}},methods:{drawLine(e,s){const{mouseDown:t,mouseMove:a}=this;let o="blue";s&&(o="blue"),e.beginPath(),e.strokeStyle=o,e.moveTo(...t),e.lineTo(...a),e.stroke()},drawRect(e,s){const{mouseDown:t,mouseMove:a}=this,o=a[0]-t[0],n=a[1]-t[1];console.log("drawRect：mouseDown, mouseMove",t,a),e.fillStyle="red",e.beginPath(),e.rect(...t,o,n),s?e.stroke():e.fill()},drawOval(e,s){const{mouseDown:t,mouseMove:a}=this,{pow:o,sqrt:n}=Math,c=a[0]-t[0],i=a[1]-t[1],r=(a[0]+t[0])/2,l=(a[1]+t[1])/2,d=n(o(c,2)+o(i,2))/2;console.log("handleMouseDown：_this.mouseDown",w.mouseDown),console.log("handleMouseMove：_this.mouseMove",w.mouseMove),console.log("drawOval：x, y, radius",r,l,d),e.fillStyle="red",e.beginPath(),e.arc(r,l,d,0,2*Math.PI),s?e.stroke():e.fill()},draw(e,s,t){const{drawLine:a,drawRect:o,drawOval:n}=this,c=s.getContext("2d");switch(t&&(c.clearRect(0,0,s.width,s.height),c.setLineDash([5,15])),e){case"line":a(c,t);break;case"rect":o(c,t);break;case"oval":n(c,t);break;default:alert("请选择绘制工具！")}},handleMouseDown(e){const{clientX:s,clientY:t}=e,{offsetLeft:a,offsetTop:o}=w.$refs.container;w.mouseDown=[s-a,t-o]},handleMouseUp(e){const{canvasDom:s,selected:t}=w;w.draw(t,s),w.mouseDown=[-1,-1]},handleMouseMove(e){const{clientX:s,clientY:t}=e,{canvasLayer:a,selected:o}=w,{offsetLeft:n,offsetTop:c}=w.$refs.container;w.mouseStatusDown&&(console.log("handleMouseMove：_this.mouseMove",w.mouseMove),w.mouseMove=[s-n,t-c],w.draw(o,a,!0))},clearCanvas(){const{width:e,height:s}=this.canvasDom;this.ctx.clearRect(0,0,e,s)}},mounted(){w=this;const{canvasDom:e}=this;this.canvasWid=e.offsetWidth,this.canvasHei=e.offsetHeight,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("mouseup",this.handleMouseUp),e.addEventListener("mousemove",this.handleMouseMove)},unmounted(){const{canvasDom:e}=this;e.removeEventListener("mousedown",this.handleMouseDown),e.removeEventListener("mouseup",this.handleMouseUp),e.removeEventListener("mousemove",this.handleMouseMove)}});const f=c("data-v-b1181b8e");r("data-v-b1181b8e");const M={class:"canvas-container",ref:"container"};l();const b=f(((e,a,n,c,r,l)=>(i(),s(o,null,[t("div",M,[t("canvas",{ref:"canvas",width:e.canvasWid,height:e.canvasHei},null,8,["width","height"]),t("canvas",{class:["canvas-layer",{on:e.mouseStatusDown}],ref:"canvasLayer",width:e.canvasWid,height:e.canvasHei},null,10,["width","height"])],512),t("button",{class:"btn-clear",type:"button",onClick:a[1]||(a[1]=(...s)=>e.clearCanvas&&e.clearCanvas(...s))},"清空画布")],64))));p.render=b,p.__scopeId="data-v-b1181b8e";var D=e({name:"App",components:{SiderBar:m,MainCanvas:p}});D.render=function(e,a,n,c,r,l){const u=d("SiderBar"),h=d("MainCanvas");return i(),s(o,null,[t(u),t(h)],64)};const L=u({state:()=>({selectedBasicGraphics:"line"}),mutations:{setSelected(e,s){e.selectedBasicGraphics=s}}});const g=h(D);g.use(L),g.mount("#app");
